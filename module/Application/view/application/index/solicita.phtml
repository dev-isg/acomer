<?php

$title = 'Solicitar';
$this->headTitle($title);
?>

<div class="content-left">
	<div class="descrip-product">
		<div class="contenido-static">
			<h2>Solicitar publicación</h2>
			<?php
			$form = $this->form;
			//$form->setAttribute('action', $this->url('usuario', array('action' => 'add')));

			$form->setAttributes(array(
			    'action' => $this->url.'/application/index/solicita',
			    'method' => 'post',
			    'class' => 'form-horizontal'
			));
			$form->prepare();

			echo $this->form()->openTag($form);
			echo $this->formHidden($form->get('in_id'));
			?>
			<?php
			$form = $this->form;
			//$form->setAttribute('action', $this->url('usuario', array('action' => 'add')));

			$form->setAttributes(array(
			    'action' => $this->url.'/usuario/index/agregarusuario',
			    'method' => 'post'
			    
			));
			$form->prepare();

			echo $this->form()->openTag($form);
			echo $this->formHidden($form->get('in_id'));

			?>

			<h3>Sobre ti:</h3>
			<div class="control-group">
			    <label class="control-label" for="inputName">Nombre<span class="red">*</span>:</label>
			    <div class="controls">
			      <?php echo $this->formRow($form->get('nombre_complet'));?>
			    </div>
			</div>
			<div class="control-group">
			    <label class="control-label" for="inputEmail">Email<span class="red">*</span>:</label>
			    <div class="controls">
			      <?php echo $this->formRow($form->get('email'));?>
			    </div>
			</div>
			<h3>Sobre el restaurante:</h3>
			<div class="control-group">
			    <label class="control-label" for="inpuNombre">Nombre del plato<span class="red">*</span>:</label>
			    <div class="controls">
			      <?php echo $this->formRow($form->get('nombre_plato'));?>
			    </div>
			</div>
			<div class="control-group">
			    <label class="control-label" for="inputEmail">Descripción:</label>
			    <div class="controls">
			      <?php echo $this->formRow($form->get('descripcion'));?>
			    </div>
			</div>
			<div class="control-group">
			    <label class="control-label" for="inputEmail">Nombre del restaurante<span class="red">*</span>:</label>
			    <div class="controls">
			      <?php echo $this->formRow($form->get('nombre_restaurant'));?>
			    </div>
			</div>
			<div class="control-group">
			    <label class="control-label" for="inputEmail">Teléfono<span class="red">*</span>:</label>
			    <div class="controls">
			      <?php echo $this->formRow($form->get('telefono'));?>
			    </div>
			</div>
			<div class="control-group">
			    <div class="controls">
			      <?php echo $this->formSubmit($form->get('submit'));?>
			    </div>
			</div>

		</div>
	</div>
	
</div>

<script type="text/javascript">

$('#submitbutton').click(function(){
	submitForm();
});

function submitForm(){ 
	var validator = $("#application").validate({ 
	rules: {
		nombre_complet: {
			required: true
		}, 
		email: {
			required: true,
			email: true
		}, 
		nombre_plato: "required",
		nombre_restaurant: "required", 
		telefono: {
			required: true,
			number: true
		}
	}, 
	errorElement: "em", 
	messages: { 
		name: "Ingrese su nombre completo", 
		email: {
			required: "Ingrese su correo electrónico",
			email: "Ingrese un correo valido"
		}, 
		nombre_plato: "Ingrese el nombre del plato", 
		nombre_restaurant: "Ingrese el nombre del restaurante", 
		telefono: {
			required: "Ingrese su teléfono",
			number: "Ingrese solo numeros"
		}
	} 
	}); 
	if(validator.form()){ // validation perform 
		$('form#application').attr({action: 'mycontroller'});	 
		$('form#application').submit(); 
	} 
}

</script>